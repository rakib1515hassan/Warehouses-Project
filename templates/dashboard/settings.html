{% extends 'dashboard/dsbase.html' %}
{% load static %}


{% block main %}



<!--begin::Main-->
<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
	<!--begin::Content wrapper-->
	<div class="d-flex flex-column flex-column-fluid">
		<!--begin::Toolbar-->
		<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
			<!--begin::Toolbar container-->
			<div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
				<!--begin::Page title-->
				<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
					<!--begin::Title-->
					<h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">
						Account Settings</h1>
					<!--end::Title-->
					<!--begin::Breadcrumb-->
					<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">
							<a href="../../demo1/dist/index.html" class="text-muted text-hover-primary">Dashboard</a>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-400 w-5px h-2px"></span>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Account</li>
						<!--end::Item-->
					</ul>
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page title-->
			
			</div>
			<!--end::Toolbar container-->
		</div>
		<!--end::Toolbar-->
		<!--begin::Content-->
		<div id="kt_app_content" class="app-content flex-column-fluid">
			<!--begin::Content container-->
			<div id="kt_app_content_container" class="app-container container-xxl">
				<!--begin::Navbar-->
				<div class="card mb-5 mb-xl-10">
					<div class="card-body pt-9 pb-0">
						<!--begin::Details-->
						<div class="d-flex flex-wrap flex-sm-nowrap">
							<!--begin: Pic-->
							<div class="me-7 mb-4">
								<div class="symbol symbol-100px symbol-lg-160px symbol-fixed position-relative">
									<img src="{% static 'assets/media/avatars/300-1.jpg' %}" alt="image" />
									<div
										class="position-absolute translate-middle bottom-0 start-100 mb-6 bg-success rounded-circle border border-4 border-body h-20px w-20px">
									</div>
								</div>
							</div>
							<!--end::Pic-->
							<!--begin::Info-->
							<div class="flex-grow-1">
								<!--begin::Title-->
								<div class="d-flex justify-content-between align-items-start flex-wrap mb-2">
									<!--begin::User-->
									<div class="d-flex flex-column">
										<!--begin::Name-->
										<div class="d-flex align-items-center mb-2">
											<a href="" class="text-gray-900 text-hover-primary fs-2 fw-bold me-1">{{user.get_full_name}}</a>
											<a href="">
												<i class="ki-duotone ki-verify fs-1 text-primary">
													<span class="path1"></span>
													<span class="path2"></span>
												</i>
											</a>
										</div>
										<!--end::Name-->
										<!--begin::Info-->
										<div class="d-flex flex-wrap fw-semibold fs-6 mb-4 pe-2">
											<a href="#"
												class="d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2">
												<i class="ki-duotone ki-geolocation fs-4 me-1">
													<span class="path1"></span>
													<span class="path2"></span>
												</i>{{user.address}}</a>
											<a href="#"
												class="d-flex align-items-center text-gray-400 text-hover-primary mb-2">
												<i class="ki-duotone ki-sms fs-4 me-1">
													<span class="path1"></span>
													<span class="path2"></span>
												</i>{{user.email}}</a>
										</div>
										<!--end::Info-->
									</div>
									<!--end::User-->
								
								</div>
								<!--end::Title-->
								<!--begin::Stats-->
								<div class="d-flex flex-wrap flex-stack">
									<!--begin::Wrapper-->
									<div class="d-flex flex-column flex-grow-1 pe-8">
										<!--begin::Stats-->
										<div class="d-flex flex-wrap">
											<!--begin::Stat-->
											<div
												class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
												<!--begin::Number-->
												<div class="d-flex align-items-center">
													<i class="ki-duotone ki-arrow-up fs-3 text-success me-2">
														<span class="path1"></span>
														<span class="path2"></span>
													</i>
													<div class="fs-2 fw-bold" data-kt-countup="true"
														data-kt-countup-value="{{earning}}" data-kt-countup-prefix="$">0</div>
												</div>
												<!--end::Number-->
												<!--begin::Label-->
												<div class="fw-semibold fs-6 text-gray-400">Earnings
												</div>
												<!--end::Label-->
											</div>
											<!--end::Stat-->
										
										</div>
										<!--end::Stats-->
									</div>
									<!--end::Wrapper-->
								
								</div>
								<!--end::Stats-->
							</div>
							<!--end::Info-->
						</div>
						<!--end::Details-->
						<!--begin::Navs-->
						<ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bold">
							<!--begin::Nav item-->
							<li class="nav-item mt-2">
								<a class="nav-link text-active-primary ms-0 me-10 py-5"
									href="{% url 'account:details' %}">Overview</a>
							</li>
							<!--end::Nav item-->
							<!--begin::Nav item-->
							<li class="nav-item mt-2">
								<a class="nav-link text-active-primary ms-0 me-10 py-5 active"
									href="{% url 'account:settings' %}">Settings</a>
							</li>
							<!--end::Nav item-->
						</ul>
						<!--begin::Navs-->
					</div>
				</div>
				<!--end::Navbar-->
				<!--begin::Basic info-->
				<div class="card mb-5 mb-xl-10">
					<!--begin::Card header-->
					<div class="card-header border-0 cursor-pointer" role="button" data-bs-toggle="collapse"
						data-bs-target="#kt_account_profile_details" aria-expanded="true"
						aria-controls="kt_account_profile_details">
						<!--begin::Card title-->
						<div class="card-title m-0">
							<h3 class="fw-bold m-0">Profile Details</h3>
						</div>
						<!--end::Card title-->
					</div>
					<!--begin::Card header-->
					<!--begin::Content-->
					<div id="kt_account_settings_profile_details" class="collapse show">
						<!--begin::Form-->
						<form id="updateProfile" name="updateProfile" class="form" method="post">
							{% csrf_token %}
							<!--begin::Card body-->
							<div class="card-body border-top p-9">
								
								<!--begin::Input group-->
								<div class="row mb-6">
									<!--begin::Label-->
									<label class="col-lg-4 col-form-label required fw-semibold fs-6">Full
										Name</label>
									<!--end::Label-->
									<!--begin::Col-->
									<div class="col-lg-8">
										<!--begin::Row-->
										<div class="row">
											<!--begin::Col-->
											<div class="col-lg-6 fv-row">
												<input type="text" name="first_name"
													class="form-control form-control-lg form-control-solid mb-3 mb-lg-0"
													placeholder="First name" value="{{user.first_name}}" />
											</div>
											<!--end::Col-->
											<!--begin::Col-->
											<div class="col-lg-6 fv-row">
												<input type="text" name="last_name"
													class="form-control form-control-lg form-control-solid"
													placeholder="Last name" value="{{user.last_name}}" />
											</div>
											<!--end::Col-->
										</div>
										<!--end::Row-->
									</div>
									<!--end::Col-->
								</div>
								<!--end::Input group-->
								<!--begin::Input group-->
								<div class="row mb-6">
									<!--begin::Label-->
									<label class="col-lg-4 col-form-label required fw-semibold fs-6">Company</label>
									<!--end::Label-->
									<!--begin::Col-->
									<div class="col-lg-8 fv-row">
										<input type="text" name="company_name"
											class="form-control form-control-lg form-control-solid"
											placeholder="Company name" value="{{user.company_name}}" />
									</div>
									<!--end::Col-->
								</div>
								<!--end::Input group-->
									<!--begin::Input group-->
								<div class="row mb-6">
									<!--begin::Label-->
									<label class="col-lg-4 col-form-label required fw-semibold fs-6">Address</label>
									<!--end::Label-->
									<!--begin::Col-->
									<div class="col-lg-8 fv-row">
										<input type="text" name="address"
											class="form-control form-control-lg form-control-solid"
											placeholder="Address" value="{{user.address}}" />
									</div>
									<!--end::Col-->
								</div>
								<!--end::Input group-->
									<!--begin::Input group-->
								<div class="row mb-6">
									<!--begin::Label-->
									<label class="col-lg-4 col-form-label required fw-semibold fs-6">Phone</label>
									<!--end::Label-->
									<!--begin::Col-->
									<div class="col-lg-8 fv-row">
										<input type="text" name="phone"
											class="form-control form-control-lg form-control-solid"
											placeholder="Phone Number" value="{{user.phone_number}}" />
									</div>
									<!--end::Col-->
								</div>
								<!--end::Input group-->
								<!--begin::Input group-->
								<div class="row mb-6">
									<!--begin::Label-->
									<label class="col-lg-4 col-form-label fw-semibold fs-6">
										<span class="required">Email</span>
										<span class="ms-1" data-bs-toggle="tooltip" title="Email must be active">
											<i class="ki-duotone ki-information-5 text-gray-500 fs-6">
												<span class="path1"></span>
												<span class="path2"></span>
												<span class="path3"></span>
											</i>
										</span>
									</label>
									<!--end::Label-->
									<!--begin::Col-->
									<div class="col-lg-8 fv-row">
										<input type="tel" name="email"
											class="form-control form-control-lg form-control-solid"
											placeholder="Email number" value="{{user.email}}" />
									</div>
									<!--end::Col-->
								</div>
								<!--end::Input group-->
								
							</div>
							<!--end::Card body-->
							<!--begin::Actions-->
							<div class="card-footer d-flex justify-content-end py-6 px-9">
								<button type="reset"
									class="btn btn-light btn-active-light-primary me-2">Discard</button>
								<button type="submit" class="btn btn-primary"
									id="submitBtn">Save Changes</button>
							</div>
							<!--end::Actions-->
						</form>
						<!--end::Form-->
					</div>
					<!--end::Content-->
				</div>
				<!--end::Basic info-->
				<!--begin::Deactivate Account-->
				<div class="card">
					<!--begin::Card header-->
					<div class="card-header border-0 cursor-pointer" role="button" data-bs-toggle="collapse"
						data-bs-target="#kt_account_deactivate" aria-expanded="true"
						aria-controls="kt_account_deactivate">
						<div class="card-title m-0">
							<h3 class="fw-bold m-0">Deactivate Account</h3>
						</div>
					</div>
					<!--end::Card header-->
					<!--begin::Content-->
					<div id="kt_account_settings_deactivate" class="collapse show">
						<!--begin::Form-->
						<form id="kt_account_deactivate_form" class="form">
							<!--begin::Card body-->
							<div class="card-body border-top p-9">
								<!--begin::Notice-->
								<div
									class="notice d-flex bg-light-warning rounded border-warning border border-dashed mb-9 p-6">
									<!--begin::Icon-->
									<i class="ki-duotone ki-information fs-2tx text-warning me-4">
										<span class="path1"></span>
										<span class="path2"></span>
										<span class="path3"></span>
									</i>
									<!--end::Icon-->
									<!--begin::Wrapper-->
									<div class="d-flex flex-stack flex-grow-1">
										<!--begin::Content-->
										<div class="fw-semibold">
											<h4 class="text-gray-900 fw-bold">You Are Deactivating Your
												Account</h4>
											<div class="fs-6 text-gray-700">For extra security, this
												requires you to confirm your email or phone number when
												you reset yousignr password.
												<br />
												<a class="fw-bold" href="#">Learn more</a></div>
										</div>
										<!--end::Content-->
									</div>
									<!--end::Wrapper-->
								</div>
								<!--end::Notice-->
								<!--begin::Form input row-->
								<div class="form-check form-check-solid fv-row">
									<input name="deactivate" class="form-check-input" type="checkbox" value=""
										id="deactivate" />
									<label class="form-check-label fw-semibold ps-2 fs-6" for="deactivate">I confirm my
										account deactivation</label>
								</div>
								<!--end::Form input row-->
							</div>
							<!--end::Card body-->
							<!--begin::Card footer-->
							<div class="card-footer d-flex justify-content-end py-6 px-9">
								<button id="kt_account_deactivate_account_submit" type="submit"
									class="btn btn-danger fw-semibold">Deactivate Account</button>
							</div>
							<!--end::Card footer-->
						</form>
						<!--end::Form-->
					</div>
					<!--end::Content-->
				</div>
				<!--end::Deactivate Account-->
			</div>
			<!--end::Content container-->
		</div>
		<!--end::Content-->
	</div>
	<!--end::Content wrapper-->
	<!--begin::Footer-->
	<div id="kt_app_footer" class="app-footer">
		<!--begin::Footer container-->
		<div class="app-container container-fluid d-flex flex-column flex-md-row flex-center flex-md-stack py-3">
			<!--begin::Copyright-->
			<div class="text-dark order-2 order-md-1">
				<span class="text-muted fw-semibold me-1">2023&copy;</span>
				<a href="https://keenthemes.com" target="_blank" class="text-gray-800 text-hover-primary">Keenthemes</a>
			</div>
			<!--end::Copyright-->
			<!--begin::Menu-->
			<ul class="menu menu-gray-600 menu-hover-primary fw-semibold order-1">
				<li class="menu-item">
					<a href="https://keenthemes.com" target="_blank" class="menu-link px-2">About</a>
				</li>
				<li class="menu-item">
					<a href="https://devs.keenthemes.com" target="_blank" class="menu-link px-2">Support</a>
				</li>
				<li class="menu-item">
					<a href="https://1.envato.market/EA4JP" target="_blank" class="menu-link px-2">Purchase</a>
				</li>
			</ul>
			<!--end::Menu-->
		</div>
		<!--end::Footer container-->
	</div>
	<!--end::Footer-->
</div>
 <div class="position-fixed top-20 end-0 p-3">
    <div id="my-toast" class="toast text-bg-primary hide" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <strong class="me-auto">Success</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Profile updated successfully!
      </div>
    </div>
  </div>
<!--end:::Main-->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $('#updateProfile').submit(function (event) {
    event.preventDefault();
    var password = $('#new_password').val();
    var confirm_password = $('#confirm_password').val();
    if (password && confirm_password && password !=
      confirm_password) {
      alert('Passwords do not match!');
      return false;
    }
    var formData = $(this).serialize();
    $('#submitBtn').prop('disabled', true);
    $('#submitBtn').html(
      '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...'
      );
    $.ajax({
      url: '',
      type: 'post',
      data: formData,
      success: function (response) {
        $('#new_password').val('');
        $('#confirm_password').val('');
        $('#submitBtn').prop('disabled', false);
        $('#submitBtn').html('Save Changes');
        var myToast = new bootstrap.Toast(document.getElementById('my-toast'));
        myToast.show();
      }
    });
  });
</script>
{% endblock main %}